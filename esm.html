<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>webp-hero</title>
		<style>
			html {
				background: #222;
				color: #aaa;
			}
		</style>
	</head>
	<body>
		<h1>webp-hero</h1>
		<p>view source on <a href="https://github.com/chase-moskal/webp-hero">github</a></p>
		<img alt="" src="images/dice.webp"/>
		<img alt="" src="images/landscape.webp"/>
		<img alt="" src="images/firebreather.webp"/>

		<script type="module">
			import {WebpMachine} from "./dist/webp-machine.js"

			async function main() {

				// for this demo, you can add "?force" to the url to force webp conversion
				const webpSupport = location.search.indexOf("force") !== -1
					? Promise.resolve(false)
					: undefined
	
				// instance the webp machine
				const webpMachine = new WebpMachine({webpSupport})
	
				// polyfill this entire document's webp images
				await webpMachine.polyfillDocument()
			}

			main()
				.catch(error => console.error("top level error:", error))
		</script>
	</body>
</html>
